let i=document.querySelector('link[rel="next"]')?.getAttribute("href");async function u(n){try{const t=await fetch(n);if(!t.ok)throw new Error("Failed to fetch page");const s=await t.text(),r=new DOMParser().parseFromString(s,"text/html"),e=r.querySelectorAll(".post"),o=r.querySelector('link[rel="next"]')?.getAttribute("href");return{posts:e,nextLink:o}}catch(t){throw new Error(t)}}function f(){if(!i)return;const n={rootMargin:"150px"},t=(c,r)=>{try{c.forEach(e=>{e.isIntersecting&&i&&u(i).then(({posts:o,nextLink:a})=>{o.forEach(l=>{document.querySelector(".gh-postfeed").append(l)}),a?(i=a,r.observe(document.querySelector(".post:last-of-type"))):r.disconnect()})})}catch(e){console.log(e)}};new IntersectionObserver(t,n).observe(document.querySelector(".post:last-of-type"))}function d(){const n=document.querySelector(".accent-bar");if(!n)return;n.classList.add("sticky"),n.style.top="2rem";const t=document.querySelector("article");if(!t||document.body.classList.contains("post-template"))return;const s=t.querySelectorAll("h2");if(!s.length)return;let c=null;const r=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&(c&&c!==o.target&&c.classList.remove("text-accent-500"),o.target.classList.add("text-accent-500"),c=o.target)})},{rootMargin:"-4rem 0px -85% 0px",threshold:0});return s.forEach(e=>{e.classList.add("transition-colors","duration-300"),r.observe(e)}),()=>{r.disconnect()}}f();d();
